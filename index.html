<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Coin ‚Ä¢ –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .header {
            padding: 22px 20px 16px;
            background: rgba(18, 10, 32, 0.7);
            backdrop-filter: blur(12px);
        }
        .balance-main {
            font-size: 52px;
            font-weight: 800;
            color: white;
            text-shadow: 0 0 20px #b47aff;
        }
        .stats-mini {
            display: flex;
            gap: 28px;
            background: rgba(45, 20, 70, 0.6);
            padding: 12px 18px;
            border-radius: 40px;
            width: fit-content;
        }
        .click-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            position: relative;
            min-height: 50vh;
        }
        .cosmo-n {
            width: 260px;
            height: 260px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #b76eff, #4a1d7a);
            border: 4px solid #bd87ff;
            box-shadow: 0 0 60px #b76eff;
            color: white;
            font-size: 110px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.08s;
            user-select: none;
        }
        .cosmo-n:active {
            transform: scale(0.92);
        }
        .floating-number {
            position: absolute;
            color: #ffd966;
            font-size: 48px;
            font-weight: 900;
            text-shadow: 0 0 30px #ffaa00;
            pointer-events: none;
            animation: floatUp 1s ease-out forwards;
        }
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-150px) scale(2); }
        }
        .action-buttons {
            display: flex;
            gap: 15px;
            margin: 15px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div style="display: flex; justify-content: space-between; color: #cba6f7;">
            <span id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            <span>‚ú® Nova Coin</span>
        </div>
        <div class="balance-main" id="balanceDisplay">500.00</div>
        <div class="stats-mini">
            <div>‚ö° <span id="perSecDisplay">+0.05</span>/—Å–µ–∫</div>
            <div>üëÜ <span id="perClickDisplay">+0.06</span>/–∫–ª–∏–∫</div>
        </div>
    </div>

    <div class="action-buttons">
        <a href="games.html" class="btn" style="text-align: center; text-decoration: none;">üéÆ –ò–≥—Ä—ã</a>
        <a href="shop.html" class="btn" style="text-align: center; text-decoration: none;">üõí –ú–∞–≥–∞–∑–∏–Ω</a>
    </div>

    <div class="click-area" id="clickArea">
        <div class="cosmo-n" id="clickButton">N</div>
    </div>

    <div class="nav-bar">
        <a href="index.html" class="nav-item active">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="shop.html" class="nav-item">üõí –ú–∞–≥–∞–∑–∏–Ω</a>
        <a href="games.html" class="nav-item">üéÆ –ò–≥—Ä—ã</a>
        <a href="rating.html" class="nav-item">üèÜ –†–µ–π—Ç–∏–Ω–≥</a>
        <a href="profile.html" class="nav-item">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="app.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
            }
            loadUserData();
        });

        document.getElementById('clickButton').addEventListener('click', (e) => {
            e.currentTarget.style.transform = 'scale(0.92)';
            setTimeout(() => e.currentTarget.style.transform = 'scale(1)', 80);
            
            let gain = userData.perClick * userData.clickMultiplier;
            if (Math.random() < userData.critChance) gain *= 2;
            
            userData.balance += gain;
            userData.totalClicks++;
            userData.totalEarned += gain;
            
            const today = new Date().toDateString();
            if (userData.lastReset !== today) {
                userData.todayEarned = 0;
                userData.lastReset = today;
            }
            userData.todayEarned += gain;
            
            updateUI();
            saveUserData();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            const rect = document.getElementById('clickArea').getBoundingClientRect();
            const floating = document.createElement('div');
            floating.className = 'floating-number';
            floating.textContent = `+${gain.toFixed(2)}`;
            floating.style.left = (rect.left + rect.width/2 - 40) + 'px';
            floating.style.top = (rect.top + rect.height/2 - 30) + 'px';
            document.body.appendChild(floating);
            setTimeout(() => floating.remove(), 1000);
        });

        // –ê–≤—Ç–æ-–¥–æ—Ö–æ–¥
        setInterval(() => {
            userData.balance += userData.perSec;
            userData.totalEarned += userData.perSec;
            userData.todayEarned += userData.perSec;
            updateUI();
            saveUserData();
        }, 1000);
    </script>
</body>
</html>